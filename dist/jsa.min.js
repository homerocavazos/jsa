/*! For license information please see jsa.min.js.LICENSE.txt */
var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{d:()=>s});class s{constructor(t={}){const e=this;e.settings=Object.assign({dl:".jsa",dt:"dt a",dd:"dd",openFirst:!1,openAll:!1,closeAll:null,closeOthers:!1,prefix:t.prefix??`${Math.random().toString(36).substring(2,7)}-`,theme:"",icons:["+","-"],iconClass:"jsa-icon",schema:!1,schemaType:"FAQPage",termPadding:"0.5em 1em 0.5em 0"},t),console.log("--------------------------------"),console.log("jsa settings = ",e.settings),e.el=document.querySelector(e.settings.dl)||null,e.terms=e.getObjs(document.querySelectorAll(`${e.settings.dl} ${e.settings.dt}`)),e.definitions=e.getObjs(document.querySelectorAll(`${e.settings.dl} ${e.settings.dd}`)),e.settings.theme&&e.el.classList.add(`jsa-theme-${e.settings.theme}`),e.el.addEventListener("click",t=>{t.preventDefault(),e.toggle(t.target)}),e.terms.map((t,s)=>{if(t.setAttribute("tabindex",0),t.setAttribute("id",`${e.settings.prefix}term${s}`),t.setAttribute("data-target",`${e.settings.prefix}definition${s}`),t.style.cursor="pointer",t.setAttribute("aria-controls",`${e.settings.prefix}definition${s}`),t.setAttribute("aria-expanded","false"),e.settings.openFirst&&0===s&&t.setAttribute("aria-expanded","true"),t.setAttribute("role","button"),t.setAttribute("aria-label",t.ariaLabel?t.ariaLabel:`Toggle definition for ${t.textContent.trim()}`),"custom"===e.settings.theme){t.style.display="flex",t.style.position="relative",t.style.justifyContent="space-between",t.style.alignItems="center",t.style.textDecoration="none",t.style.padding=e.settings.termPadding,t.style.borderTop="1px solid #eee";let i=document.createElement("span");i.innerHTML=e.settings.icons[0],i.classList.add(e.settings.iconClass),i.style.pointerEvents="none",e.settings.openFirst&&0===s&&(i.innerHTML=e.settings.icons[1]),t.appendChild(i)}e.settings.openFirst&&0===s&&t.parentNode.classList.add("active"),t.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.toggle(t.target))})}),e.definitions.map((t,s)=>{t.setAttribute("id",`${e.settings.prefix}definition${s}`),t.setAttribute("aria-labelledby",`${e.settings.prefix}term${s}`),t.style.maxHeight="0",t.style.overflow="hidden",!0===e.settings.openFirst&&0===s&&t.classList.add("show"),!0===e.settings.openFirst&&0===s&&(t.style.maxHeight=t.scrollHeight+"px"),!0===e.settings.openAll&&t.classList.add("show"),!0===e.settings.openAll&&(t.style.maxHeight=t.scrollHeight+"px"),"custom"===e.settings.theme&&(t.style.padding="0",t.style.margin="0",t.style.borderBottom="1px solid #eee",t.style.borderTop="none",t.style.transition="max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1)",!0===e.settings.openFirst&&0===s&&(t.style.padding="1em 0"))}),e.init(),e.schema=[],e.buildSchema(),e.settings.closeAll&&document.querySelector(e.settings.closeAll).addEventListener("click",t=>e.reset())}init(){const t=this;window.addEventListener("resize",t.debounce(e=>{t.updateDefinitionHeight()},200))}toggle(t){const e=this;if(!t.dataset.target)return;let s=t.dataset.target,i=document.getElementById(`${s}`);const n=i.classList.contains("show");e.settings.closeOthers&&!n&&e.reset(),"custom"===e.settings.theme&&(i.style.padding=n?"0":"1em 0"),i.classList.toggle("show"),t.setAttribute("aria-expanded",n?"false":"true"),t.parentNode.classList.toggle("active");let r=t.querySelector(`.${e.settings.iconClass}`);r&&(r.innerHTML=n?e.settings.icons[0]:e.settings.icons[1]),i.style.maxHeight=n?"0":i.scrollHeight+"px"}reset(){const t=this;t.terms.map((e,s)=>{e.parentNode.classList.remove("active"),e.setAttribute("aria-expanded","false");let i=e.querySelector(`.${t.settings.iconClass}`);i&&(i.innerHTML=t.settings.icons[0])}),t.definitions.map((e,s)=>{e.classList.remove("show"),e.style.maxHeight="0","custom"===t.settings.theme&&(e.style.padding="0")})}getObjs(t){return Object.keys(t).map(function(e){return t[e]})}buildSchema(){const t=this;if(!t.settings.schema)return;let e={"@context":"https://schema.org","@type":t.settings.schemaType,mainEntity:[]};t.terms.map((s,i)=>{const n={"@type":"Question",name:s.textContent.trim(),acceptedAnswer:{"@type":"Answer",text:t.definitions[i].innerHTML.trim()}};e.mainEntity.push(n)}),t.el.insertAdjacentHTML("beforeend",`<script type="application/ld+json">${JSON.stringify(e)}<\/script>`)}debounce(t,e){let s;return function(){clearTimeout(s),s=setTimeout(()=>t.apply(this,arguments),e)}}updateDefinitionHeight(){this.definitions.map((t,e)=>{t.classList.contains("show")&&(t.style.maxHeight=t.scrollHeight+"px")})}}const i=e.d;export{i as jsa};