/*! For license information please see jsa.umd.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cba=t():(e.cba=e.cba||{},e.cba.jsa=t())}(self,()=>(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{jsa:()=>s});class s{constructor(e={}){const t=this;t.darkmode=!(!window.matchMedia||!window.matchMedia("(prefers-color-scheme: dark)").matches),t.settings=Object.assign({dl:".jsa",dt:"dt a",dd:"dd",theme:"",openFirst:!1,openAll:!1,closeAll:null,closeOthers:!1,animate:!1,prefix:e.prefix??`${Math.random().toString(36).substring(2,7)}-`,hasNested:!!document.querySelector(e.dl)&&document.querySelector(e.dl).querySelectorAll(e.dl).length>0,icons:["",""],iconClass:"jsa-icon",termPadding:"0.5em 1em 0.5em 0",schema:!1,schemaType:"FAQPage",termBg:t.darkmode?"transparent":"",termBgActive:t.darkmode?"black":"",termColor:t.darkmode?"#719456":"",termColorActive:t.darkmode?"#fff":"",borders:!0,borderColor:t.darkmode?"#719456":"",darkmode:!1,debug:!1},e),t.settings.debug&&console.log("jsa settings = ",t.settings),t.parentDL=document.querySelector(t.settings.dl)||null,t.terms=Array.from(t.parentDL.querySelectorAll(`${t.settings.dt}`)).filter(e=>e.closest(t.settings.dl)===t.parentDL),t.definitions=Array.from(document.querySelectorAll(`${t.settings.dl} ${t.settings.dd}`)).filter(e=>{const s=e.parentElement.closest(t.settings.dl),i=t.parentDL;return s===i&&e.parentElement.closest(t.settings.dl)===i}),t.settings.theme&&t.parentDL.classList.add(`jsa-theme-${t.settings.theme}`),t.parentDL.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.toggle(e.target)}),t.terms.map((e,s)=>{if(e.setAttribute("tabindex",0),e.setAttribute("id",`${t.settings.prefix}term${s}`),e.setAttribute("data-target",`${t.settings.prefix}definition${s}`),e.style.cursor="pointer",e.setAttribute("aria-controls",`${t.settings.prefix}definition${s}`),e.setAttribute("aria-expanded","false"),0===s&&e.classList.add("first-term"),t.terms.length===s+1&&e.classList.add("last-term"),t.settings.openFirst&&0===s&&e.setAttribute("aria-expanded","true"),t.settings.openAll&&e.setAttribute("aria-expanded","true"),e.setAttribute("role","button"),e.setAttribute("aria-label",e.ariaLabel?e.ariaLabel:`Toggle definition for ${e.textContent.trim()}`),"core"===t.settings.theme){e.style.display="flex",e.style.position="relative",e.style.justifyContent="space-between",e.style.alignItems="center",e.style.gap="1em",e.style.textDecoration="none",e.style.padding=t.settings.termPadding,e.style.borderTop=t.settings.borders?"1px solid "+(t.settings.darkmode?t.settings.borderColor:""):"none",e.style.color=t.settings.darkmode?t.settings.termColor:"";let i=document.createElement("span");i.innerHTML=t.settings.icons[0],i.classList.add(t.settings.iconClass),i.style.pointerEvents="none",t.settings.openFirst&&0===s&&(i.innerHTML=t.settings.icons[1]),!0===t.settings.openAll&&(i.innerHTML=t.settings.icons[1]),e.appendChild(i)}t.settings.openFirst&&0===s&&e.parentNode.classList.add("active"),!0===t.settings.openAll&&e.parentNode.classList.add("active"),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.toggle(e.target))})}),t.definitions.map((e,s)=>{e.setAttribute("id",`${t.settings.prefix}definition${s}`),e.setAttribute("aria-labelledby",`${t.settings.prefix}term${s}`),e.style.maxHeight="0",e.style.overflow="hidden",e.style.margin="0",!0===t.settings.animate&&(e.style.transition="max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1)"),!0===t.settings.openFirst&&0===s&&e.classList.add("show"),!0===t.settings.openFirst&&0===s&&(e.style.maxHeight=e.scrollHeight+"px"),!0===t.settings.openAll&&e.classList.add("show"),!0===t.settings.openAll&&(e.style.maxHeight=e.scrollHeight+"px"),0===s&&e.classList.add("first-term"),t.definitions.length===s+1&&e.classList.add("last-term"),"core"===t.settings.theme&&(e.style.padding="0",e.style.margin="0",e.style.borderTop="none",e.style.transition="max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1)")}),t.init(),t.schema=[],t.buildSchema(),t.settings.closeAll&&document.querySelector(t.settings.closeAll)&&document.querySelector(t.settings.closeAll).addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.reset()})}init(){const e=this;window.addEventListener("resize",e.debounce(t=>{e.updateDefinitionHeight()},200))}toggle(e){const t=this;if(!e.dataset.target)return;let s=e.dataset.target,i=document.getElementById(`${s}`);const n=i.classList.contains("show");t.settings.closeOthers&&!n&&t.reset(),i.classList.toggle("show"),e.setAttribute("aria-expanded",n?"false":"true"),e.parentNode.classList.toggle("active"),"core"===t.settings.theme&&(e.parentNode.classList.contains("active")&&!0===t.settings.darkmode?(e.style.color=t.settings.darkmode?t.settings.termColorActive:_settings.termColor,e.parentNode.style.backgroundColor=t.settings.darkmode?t.settings.termBgActive:""):(e.style.color=t.settings.darkmode?t.settings.termColor:"",e.parentNode.style.backgroundColor=t.settings.darkmode?t.settings.termBg:""));let r=e.querySelector(`.${t.settings.iconClass}`);r&&(r.innerHTML=n?t.settings.icons[0]:t.settings.icons[1]),i.style.maxHeight=n?"0":i.scrollHeight+"px"}reset(){const e=this;e.terms.map((t,s)=>{t.parentNode.classList.remove("active"),t.setAttribute("aria-expanded","false");let i=t.querySelector(`.${e.settings.iconClass}`);i&&(i.innerHTML=e.settings.icons[0])}),e.definitions.map((t,s)=>{t.classList.remove("show"),t.style.maxHeight="0","core"===e.settings.theme&&(t.style.padding="0")})}buildSchema(){const e=this;if(!e.settings.schema)return;let t={"@context":"https://schema.org","@type":e.settings.schemaType,mainEntity:[]};e.terms.map((s,i)=>{const n={"@type":"Question",name:s.textContent.trim(),acceptedAnswer:{"@type":"Answer",text:e.definitions[i].innerHTML.trim()}};t.mainEntity.push(n)}),e.el.insertAdjacentHTML("beforeend",`<script type="application/ld+json">${JSON.stringify(t)}<\/script>`)}debounce(e,t){let s;return function(){clearTimeout(s),s=setTimeout(()=>e.apply(this,arguments),t)}}updateDefinitionHeight(){this.definitions.map((e,t)=>{e.classList.contains("show")&&(e.style.maxHeight=e.scrollHeight+"px")})}}return t})());